<div class="auth-container">
  <div class="form-box">
    <h2>Create a New Course</h2>

    @if (hasError) {
      <app-error-msg/>
    }

    <form [formGroup]="form" (ngSubmit)="createCourse()" class="course-form">
      <div class="input-group" [class.invalid]="form.get('courseTitle')?.invalid && form.get('courseTitle')?.touched" [class.valid]="form.get('courseTitle')?.valid && form.get('courseTitle')?.touched">
        <label for="courseTitle">Course Title:</label>
        <input type="text" id="courseTitle" placeholder="Enter course title" formControlName="courseTitle">
      </div>

      @if(form.get('courseTitle')?.touched) {
        <div>
          @if(form.get('courseTitle')?.errors?.['required']) {
            <div class="error">Course title is required!</div>
          }
          @if(form.get('courseTitle')?.errors?.['minlength']) {
            <div class="error">Course title must be at least 2 characters!</div>
          }
        </div>
      }

      <div class="input-group" [class.invalid]="form.get('startDate')?.invalid && form.get('startDate')?.touched" [class.valid]="form.get('startDate')?.valid && form.get('startDate')?.touched">
        <label for="startDate">Start Date:</label>
        <input type="date" id="startDate" formControlName="startDate" />
      </div>

      @if(form.get('startDate')?.touched) {
        <div>
          @if(form.get('startDate')?.errors?.['required']) {
            <div class="error">Start date is required!</div>
          }
        </div>
      }

      <div class="input-group" [class.invalid]="form.get('price')?.invalid && form.get('price')?.touched" [class.valid]="form.get('price')?.valid && form.get('price')?.touched">
        <label for="price">Price (USD):</label>
        <input type="number" id="price" placeholder="Enter price" formControlName="price" />
      </div>

      @if(form.get('price')?.touched) {
        <div>
          @if(form.get('price')?.errors?.['required']) {
            <div class="error">Price is required!</div>
          }

          @if(form.get('price')?.errors?.['min']) {
            <div class="error">Price must be at least 0$!</div>
          }
        </div>
      }

      <div class="input-group" [class.invalid]="form.get('imageUrl')?.invalid && form.get('imageUrl')?.touched" [class.valid]="form.get('imageUrl')?.valid && form.get('imageUrl')?.touched">
        <label for="imageUrl">Image URL:</label>
        <input type="text" id="imageUrl" placeholder="Enter image URL" formControlName="imageUrl" />
      </div>
      
      @if(form.get('imageUrl')?.touched) {
        <div>
          @if(form.get('imageUrl')?.errors?.['required']) {
            <div class="error">Image is required!</div>
          }
        </div>
      }

      <div class="input-group" [class.invalid]="form.get('description')?.invalid && form.get('description')?.touched" [class.valid]="form.get('description')?.valid && form.get('description')?.touched">
        <label for="description">Course Description:</label>
        <textarea id="description" placeholder="Enter course description" formControlName="description"></textarea>
      </div>

      @if(form.get('description')?.touched) {
        <div>
          @if(form.get('description')?.errors?.['required']) {
            <div class="error">Description is required!</div>
          }

          @if(form.get('description')?.errors?.['minLength']) {
            <div class="error">Description must be at least 10 characters long!</div>
          }

          @if(form.get('description')?.errors?.['maxLength']) {
            <div class="error">Description must be no longer than 100 characters!</div>
          }
        </div>
      }

      <button class="submit-btn" [disabled]="form.invalid" [style]="{backgroundColor: form.invalid ? '#007d7d' : '#00ffff'}">
        Create Course
      </button>
    </form>
  </div>
</div>